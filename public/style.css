@import url('https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel+Decorative:wght@400;700;900&family=Cinzel:wght@400;600;700&family=IM+Fell+English:ital@0;1&display=swap');

  :root {
    --bg: #0a0806;
    --parch: #c8a96e;
    --parch-dark: #8a6830;
    --parch-light: #e8d4a8;
    --parch-mid: #b08840;
    --ink: #1a0f08;
    --ink-light: #3a2818;
    --wood: #5a3a18;
    --wood-light: #8a5a28;
    --metal: #788090;
    --metal-light: #a0b0c0;
    --ember: #e05020;
    --ember-bright: #ff7030;
    --gold: #c8a96e;
    --gold-bright: #f0d080;
    --ruby: #c03040;
    --sapphire: #3060a0;
    --emerald: #208050;
    --shadow: #050302;
    --veil-purple: #5a1a8a;
    --hp-red: #c02030;
    --hp-orange: #d04010;
    --panel-bg: rgba(15,10,5,0.97);
    --panel-border: rgba(120,80,30,0.8);
    --text-bright: #f0e8d0;
    --text-mid: #c8b090;
    --text-dim: #7a5a38;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--bg); color:var(--text-bright); font-family:'Cinzel',Georgia,serif; min-height:100vh; overflow:hidden; user-select:none; }

  /* ═══════════════ MAIN MENU ═══════════════ */
  #main-menu {
    position:fixed; inset:0; z-index:1000;
    background:radial-gradient(ellipse at 50% 40%, #1a0c05 0%, #050302 70%);
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    overflow:hidden;
  }
  #main-menu.hidden { display:none; }
  .menu-bg-art {
    position:absolute; inset:0; pointer-events:none;
    background:
      radial-gradient(ellipse 200px 400px at 15% 50%, rgba(200,80,20,0.08) 0%, transparent 70%),
      radial-gradient(ellipse 200px 400px at 85% 50%, rgba(90,26,138,0.08) 0%, transparent 70%),
      radial-gradient(ellipse 600px 200px at 50% 85%, rgba(30,15,5,0.9) 0%, transparent 70%);
  }
  .menu-rune-border {
    position:absolute; inset:20px;
    border:1px solid rgba(200,169,110,0.15);
    pointer-events:none;
  }
  .menu-rune-border::before {
    content:''; position:absolute; inset:8px;
    border:1px solid rgba(200,169,110,0.08);
  }
  .menu-corner {
    position:absolute; width:60px; height:60px;
    border-color:rgba(200,169,110,0.5); border-style:solid;
  }
  .menu-corner.tl { top:25px;left:25px; border-width:2px 0 0 2px; }
  .menu-corner.tr { top:25px;right:25px; border-width:2px 2px 0 0; }
  .menu-corner.bl { bottom:25px;left:25px; border-width:0 0 2px 2px; }
  .menu-corner.br { bottom:25px;right:25px; border-width:0 2px 2px 0; }

  .menu-title-wrap { text-align:center; margin-bottom:8px; position:relative; }
  .menu-eyebrow { font-size:11px; letter-spacing:8px; color:var(--parch-dark); text-transform:uppercase; margin-bottom:16px; }
  .menu-title {
    font-family:'Cinzel Decorative',serif; font-size:72px; font-weight:900;
    letter-spacing:12px; line-height:1;
    color:transparent;
    background:linear-gradient(180deg, #f0d080 0%, #c8a96e 40%, #8a6020 80%, #5a3a10 100%);
    -webkit-background-clip:text; background-clip:text;
    text-shadow:none;
    filter:drop-shadow(0 0 30px rgba(200,169,110,0.4));
    position:relative;
  }
  .menu-title::after {
    content:'VEILBORN';
    position:absolute; top:3px; left:3px;
    color:transparent;
    background:linear-gradient(180deg,rgba(0,0,0,0.5),rgba(0,0,0,0.2));
    -webkit-background-clip:text; background-clip:text;
    z-index:-1;
  }
  .menu-subtitle { font-family:'IM Fell English',serif; font-style:italic; font-size:16px; color:var(--parch-dark); letter-spacing:4px; margin-top:8px; }

  .menu-divider {
    width:400px; height:1px;
    background:linear-gradient(90deg, transparent, var(--gold), transparent);
    margin:24px 0;
    position:relative;
  }
  .menu-divider::after {
    content:'✦'; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    color:var(--gold); font-size:14px; background:var(--bg); padding:0 8px;
  }

  .menu-nav { display:flex; flex-direction:column; gap:8px; align-items:center; width:320px; }
  .menu-btn {
    width:100%; padding:14px 32px; position:relative;
    font-family:'Cinzel',serif; font-size:14px; letter-spacing:4px;
    color:var(--parch-light); text-transform:uppercase;
    background:linear-gradient(90deg, transparent, rgba(200,169,110,0.05), transparent);
    border:1px solid rgba(200,169,110,0.25);
    cursor:pointer; transition:all 0.3s; overflow:hidden;
    text-align:center;
  }
  .menu-btn::before {
    content:''; position:absolute; inset:0;
    background:linear-gradient(90deg, transparent 0%, rgba(200,169,110,0.1) 50%, transparent 100%);
    transform:translateX(-100%); transition:transform 0.4s;
  }
  .menu-btn:hover::before { transform:translateX(100%); }
  .menu-btn:hover { border-color:rgba(200,169,110,0.7); color:var(--gold-bright); box-shadow:0 0 20px rgba(200,169,110,0.15); }
  .menu-btn.primary {
    background:linear-gradient(90deg, rgba(200,80,20,0.15), rgba(200,80,20,0.25), rgba(200,80,20,0.15));
    border-color:rgba(200,80,20,0.5);
    font-size:16px;
  }
  .menu-btn.primary:hover { border-color:#e05020; box-shadow:0 0 30px rgba(200,80,20,0.3); }
  .menu-btn-icon { margin-right:12px; opacity:0.7; }

  /* CLASS SELECTION PANEL */
  #class-select-panel {
    position:fixed; inset:0; z-index:999;
    background:linear-gradient(180deg, rgba(4,2,1,0.99), rgba(8,3,2,0.98));
    display:none; flex-direction:column; align-items:center; padding:24px 20px;
    overflow-y:auto;
  }
  #class-select-panel.visible { display:flex; }
  .cs-title { font-family:'Cinzel Decorative',serif; font-size:24px; color:var(--gold); letter-spacing:6px; margin-bottom:4px; }
  .cs-sub { font-family:'IM Fell English',serif; font-style:italic; color:var(--parch-dark); margin-bottom:20px; }
  .cs-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:14px; max-width:1050px; width:100%; }
  .cs-card {
    background:linear-gradient(180deg,rgba(20,12,5,0.95),rgba(10,6,2,0.98));
    border:1px solid rgba(120,80,30,0.3); cursor:pointer;
    transition:all 0.25s; position:relative; overflow:hidden; border-radius:3px;
  }
  .cs-card::before { content:''; position:absolute; left:0;top:0;bottom:0; width:3px; background:var(--class-color,#444); }
  .cs-card:hover { border-color:var(--class-color,#888); transform:translateY(-3px); box-shadow:0 10px 28px rgba(0,0,0,0.7), 0 0 12px var(--class-color,rgba(0,0,0,0.1)); }
  .cs-card-selected { border-color:var(--gold)!important; background:rgba(200,169,110,0.06)!important; box-shadow: 0 0 20px rgba(200,169,110,0.15)!important; }
  .cs-card-selected::before { width:4px; }
  .cs-name { font-family:'Cinzel Decorative',serif; font-size:11px; color:var(--class-color,#c8a96e); margin:8px 12px 2px; }
  .cs-role { font-family:'IM Fell English',serif; font-style:italic; font-size:11px; color:var(--text-dim); margin:0 12px 6px; }
  .cs-resource-badge { margin: 0 12px 6px; }
  .cs-stats { display:grid; grid-template-columns:1fr 1fr; gap:4px 8px; font-size:10px; font-family:'Cinzel',serif; padding: 0 12px; }
  .cs-stat { color:var(--text-dim); display:flex; justify-content:space-between; background:rgba(0,0,0,0.3); padding:2px 5px; border-radius:2px; }
  .cs-lore { font-family:'IM Fell English',serif; font-style:italic; font-size:10px; color:var(--parch-dark); margin:8px 12px 6px; line-height:1.4; border-top:1px solid rgba(120,80,30,0.2); padding-top:6px; }
  .cs-difficulty { padding: 0 12px 10px; }
  .cs-actions { display:flex; gap:12px; margin-top:20px; }
  .cs-btn { padding:12px 32px; font-family:'Cinzel',serif; font-size:12px; letter-spacing:3px; cursor:pointer; border:1px solid; transition:all 0.2s; border-radius:2px; }
  .cs-btn.confirm { background:rgba(200,80,20,0.2); border-color:#e05020; color:#f08040; }
  .cs-btn.confirm:hover { background:rgba(200,80,20,0.4); }
  .cs-btn.back { background:transparent; border-color:rgba(200,169,110,0.3); color:var(--parch-dark); }
  .cs-btn.back:hover { border-color:var(--gold); color:var(--gold); }

  /* OPTIONS */
  #options-panel {
    position:fixed; inset:0; z-index:999;
    background:rgba(5,3,2,0.98);
    display:none; flex-direction:column; align-items:center; justify-content:center; gap:16px;
  }
  #options-panel.visible { display:flex; }
  .opt-title { font-family:'Cinzel Decorative',serif; font-size:22px; color:var(--gold); letter-spacing:5px; }
  .opt-section { width:400px; background:rgba(20,12,5,0.9); border:1px solid var(--panel-border); padding:20px; }
  .opt-row { display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px solid rgba(120,80,30,0.2); font-size:12px; color:var(--text-mid); }
  .opt-toggle { width:44px; height:22px; background:#1a1008; border:1px solid var(--panel-border); border-radius:11px; cursor:pointer; position:relative; transition:all 0.3s; }
  .opt-toggle.on { background:rgba(200,80,20,0.4); border-color:#e05020; }
  .opt-toggle::after { content:''; position:absolute; width:16px; height:16px; border-radius:50%; background:var(--text-dim); top:2px; left:2px; transition:all 0.3s; }
  .opt-toggle.on::after { left:24px; background:var(--ember-bright); }

  /* ═══════════════ GAME ═══════════════ */
  #app { display:grid; grid-template-columns:260px 1fr 260px; grid-template-rows:64px 1fr 160px; height:100vh; }
  #app.hidden { display:none; }

  /* HEADER */
  #header {
    grid-column:1/-1;
    background:linear-gradient(90deg, #050302, #100804 25%, #150a04 50%, #100804 75%, #050302);
    border-bottom:2px solid;
    border-image:linear-gradient(90deg,transparent,var(--gold),var(--parch-dark),var(--gold),transparent) 1;
    display:flex; align-items:center; justify-content:space-between; padding:0 20px;
    position:relative; z-index:10;
  }
  .header-left { display:flex; align-items:center; gap:12px; }
  .header-center { position:absolute; left:50%; transform:translateX(-50%); display:flex; align-items:center; gap:16px; }
  .header-right { display:flex; align-items:center; gap:8px; font-size:11px; color:var(--text-dim); }
  .header-rune {
    width:32px;height:32px; border:1px solid rgba(200,169,110,0.4);
    transform:rotate(45deg); display:flex; align-items:center; justify-content:center;
    font-size:12px; color:var(--gold);
  }
  #header h1 {
    font-family:'Cinzel Decorative',serif; font-size:20px; letter-spacing:8px;
    background:linear-gradient(180deg,#f0d080,#c8a96e,#8a6020);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    filter:drop-shadow(0 0 10px rgba(200,169,110,0.3));
  }
  .header-badge {
    font-family:'Cinzel',serif; font-size:8px; letter-spacing:2px;
    border:1px solid rgba(200,169,110,0.3); padding:2px 8px; color:var(--parch-dark);
  }
  .hdr-btn { 
    padding:5px 12px; font-family:'Cinzel',serif; font-size:9px; letter-spacing:2px;
    border:1px solid rgba(120,80,30,0.5); color:var(--text-dim); cursor:pointer;
    background:rgba(20,12,5,0.6); transition:all 0.2s; text-transform:uppercase;
  }
  .hdr-btn:hover { border-color:var(--gold); color:var(--gold); }

  /* ═══ LEFT PANEL ═══ */
  #panel-left {
    background:linear-gradient(180deg,#0a0604,#080402);
    border-right:1px solid rgba(120,80,30,0.6);
    padding:12px 10px; overflow-y:auto; display:flex; flex-direction:column; gap:5px;
    position:relative;
  }
  #panel-left::before {
    content:''; position:absolute; top:0; right:0; width:1px; height:100%;
    background:linear-gradient(180deg,transparent,rgba(200,169,110,0.3),transparent);
    pointer-events:none;
  }
  .panel-title {
    font-family:'Cinzel',serif; font-size:9px; letter-spacing:3px; color:var(--parch-dark);
    text-transform:uppercase; margin-bottom:8px; padding-bottom:5px;
    border-bottom:1px solid rgba(120,80,30,0.4);
    display:flex; align-items:center; gap:6px;
  }
  .panel-title-rune { color:var(--gold); font-size:10px; }

  .class-card {
    background:linear-gradient(135deg,rgba(20,12,5,0.9),rgba(15,9,3,0.95));
    border:1px solid rgba(80,50,20,0.5); border-radius:1px;
    padding:9px 10px; cursor:pointer; transition:all 0.2s; position:relative; overflow:hidden;
  }
  .class-card::before { content:''; position:absolute; left:0;top:0;bottom:0; width:3px; background:var(--class-color,#444); opacity:0.8; }
  .class-card:hover { background:rgba(30,18,6,0.95); border-color:rgba(200,169,110,0.35); }
  .class-card.active { background:rgba(200,169,110,0.07); border-color:rgba(200,169,110,0.5); }
  .class-name { font-family:'Cinzel',serif; font-size:10px; letter-spacing:1px; color:var(--text-bright); }
  .class-role { font-family:'IM Fell English',serif; font-style:italic; font-size:10px; color:var(--text-dim); margin-top:2px; }
  .class-resource { font-size:9px; color:var(--class-color,#555); margin-top:3px; }
  .resource-bar-wrap { margin-top:4px; height:3px; background:rgba(10,5,2,0.8); border-radius:1px; overflow:hidden; border:1px solid rgba(60,40,15,0.5); }
  .resource-bar { height:100%; border-radius:1px; transition:width 0.3s; }
  .class-stats { display:flex; gap:8px; margin-top:4px; font-size:9px; color:var(--text-dim); }
  .class-stat-val { color:var(--text-mid); }

  /* ═══ ARENA ═══ */
  #arena {
    position:relative; overflow:hidden;
    background:#040301;
    display:flex; align-items:center; justify-content:center;
  }
  #game-canvas { display:block; cursor:crosshair; }
  #tooltip {
    position:absolute; padding:6px 10px; pointer-events:none; display:none; z-index:100;
    background:rgba(8,5,2,0.97); border:1px solid rgba(120,80,30,0.7);
    font-family:'Cinzel',serif; font-size:10px; color:var(--gold);
    box-shadow:0 4px 12px rgba(0,0,0,0.8);
  }
  #targeting-indicator {
    position:absolute; top:12px; left:50%; transform:translateX(-50%);
    background:linear-gradient(90deg,rgba(200,80,20,0.1),rgba(200,80,20,0.25),rgba(200,80,20,0.1));
    border:1px solid #e05020; padding:7px 20px;
    font-family:'Cinzel',serif; font-size:10px; letter-spacing:3px; color:#ff9060;
    display:none; z-index:200; animation:pulseInd 1s ease-in-out infinite;
  }
  @keyframes pulseInd { 0%,100%{box-shadow:0 0 8px rgba(200,80,20,0.4)} 50%{box-shadow:0 0 25px rgba(200,80,20,0.9)} }

  .tactical-badge {
    position:absolute; top:12px; right:12px;
    background:rgba(0,30,60,0.85); border:1px solid rgba(80,160,255,0.5);
    padding:4px 12px; font-family:'Cinzel',serif; font-size:9px; letter-spacing:2px;
    color:#80c0ff; display:none;
  }

  /* ═══ SKILL TREE MODAL ═══ */
  #skill-tree-modal {
    display:none; position:absolute; inset:0; background:rgba(4,3,2,0.97);
    z-index:500; flex-direction:column; align-items:center; padding:20px; overflow-y:auto;
  }
  #skill-tree-modal.visible { display:flex; }
  .tree-header { font-family:'Cinzel Decorative',serif; font-size:18px; color:var(--gold); letter-spacing:6px; margin-bottom:2px; }
  .tree-subtitle { font-family:'IM Fell English',serif; font-style:italic; font-size:13px; color:var(--parch-dark); margin-bottom:12px; }
  .tree-layout { display:flex; gap:20px; width:100%; max-width:920px; }
  .equipped-panel { width:210px; flex-shrink:0; }
  .equipped-title { font-family:'Cinzel',serif; font-size:9px; letter-spacing:3px; color:var(--parch-dark); margin-bottom:8px; border-bottom:1px solid rgba(120,80,30,0.4); padding-bottom:4px; }
  .equipped-slot {
    background:linear-gradient(135deg,rgba(20,12,5,0.9),rgba(12,7,2,0.95));
    border:1px solid rgba(80,50,20,0.5); padding:8px 10px; margin-bottom:6px;
    min-height:52px; cursor:pointer; position:relative; transition:all 0.2s;
  }
  .equipped-slot:hover { border-color:var(--ruby); }
  .equipped-slot-label { font-family:'Cinzel',serif; font-size:8px; color:var(--text-dim); letter-spacing:2px; margin-bottom:3px; text-transform:uppercase; }
  .equipped-slot-name { font-family:'IM Fell English',serif; font-size:12px; color:var(--text-mid); }
  .equipped-slot-key { position:absolute; top:6px; right:8px; font-family:'Cinzel Decorative',serif; font-size:9px; color:var(--parch-dark); border:1px solid rgba(120,80,30,0.5); padding:1px 5px; }
  .equipped-slot-empty { font-family:'IM Fell English',serif; font-style:italic; font-size:11px; color:#3a2010; }
  .skills-grid { flex:1; display:grid; grid-template-columns:repeat(4,1fr); gap:8px; align-content:start; }
  .skill-node {
    background:linear-gradient(135deg,rgba(18,10,4,0.9),rgba(12,7,2,0.95));
    border:1px solid rgba(60,40,15,0.6); padding:10px 8px;
    cursor:pointer; transition:all 0.2s; position:relative;
  }
  .skill-node:hover { border-color:rgba(200,169,110,0.4); background:rgba(25,15,5,0.95); }
  .skill-node.unlocked { border-color:rgba(100,60,20,0.8); }
  .skill-node.equipped { border-color:rgba(200,169,110,0.6); background:rgba(200,169,110,0.07); }
  .skill-node-name { font-family:'Cinzel',serif; font-size:9px; color:var(--text-mid); margin-bottom:3px; }
  .skill-node-desc { font-family:'IM Fell English',serif; font-style:italic; font-size:10px; color:var(--text-dim); line-height:1.3; }
  .skill-node-type { font-size:8px; color:#3a4a5a; margin-top:4px; }
  .skill-node-badge { position:absolute; top:4px; right:4px; font-size:9px; color:var(--gold); }
  .tree-close {
    font-family:'Cinzel',serif; font-size:10px; color:var(--parch-dark); letter-spacing:3px;
    margin-top:16px; cursor:pointer; border:1px solid rgba(120,80,30,0.4); padding:7px 24px;
    transition:all 0.2s; text-transform:uppercase;
  }
  .tree-close:hover { color:var(--gold); border-color:var(--gold); }
  .tree-instructions { font-family:'IM Fell English',serif; font-style:italic; font-size:11px; color:#3a2010; text-align:center; margin-bottom:10px; }

  /* ═══ STATS PANEL ═══ */
  #stats-panel {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    background:linear-gradient(135deg,rgba(10,6,2,0.98),rgba(8,5,1,0.99));
    border:1px solid rgba(120,80,30,0.7); padding:20px; min-width:330px;
    max-height:80vh; overflow-y:auto; display:none; z-index:300;
    box-shadow:0 0 40px rgba(0,0,0,0.9),inset 0 0 60px rgba(200,169,110,0.02);
  }
  #stats-panel.visible { display:block; }
  #talent-tree-modal.visible { display:block !important; }
  .stats-panel-title { font-family:'Cinzel Decorative',serif; font-size:12px; letter-spacing:3px; color:var(--gold); text-align:center; margin-bottom:12px; padding-bottom:8px; border-bottom:1px solid rgba(120,80,30,0.4); }
  .entity-stat-row { display:flex; justify-content:space-between; align-items:center; padding:4px 0; border-bottom:1px solid rgba(30,15,5,0.8); font-size:11px; }
  .entity-stat-label { font-family:'Cinzel',serif; font-size:9px; letter-spacing:1px; color:var(--text-dim); text-transform:uppercase; }
  .entity-stat-val { font-family:'IM Fell English',serif; font-size:13px; color:var(--text-bright); }
  .entity-stat-val.danger { color:#e05020; }
  .entity-stat-val.good { color:#40a060; }

  /* ═══ FLOATERS ═══ */
  .floater { position:absolute; font-family:'Cinzel Decorative',serif; pointer-events:none; z-index:150; animation:floatUp 1.2s ease-out forwards; white-space:nowrap; }
  @keyframes floatUp { 0%{opacity:1;transform:translateY(0) scale(1)} 80%{opacity:0.8} 100%{opacity:0;transform:translateY(-60px) scale(0.7)} }

  /* ═══ RIGHT PANEL (MEDIEVAL HUD) ═══ */
  #panel-right {
    background:linear-gradient(180deg,#0a0604,#080402);
    border-left:1px solid rgba(120,80,30,0.6);
    padding:12px 10px; display:flex; flex-direction:column; gap:8px; overflow-y:auto;
    position:relative;
  }
  #panel-right::before {
    content:''; position:absolute; top:0; left:0; width:1px; height:100%;
    background:linear-gradient(180deg,transparent,rgba(200,169,110,0.3),transparent);
    pointer-events:none;
  }

  /* HP Display - Medieval Style */
  .hp-display {
    background:linear-gradient(135deg,rgba(40,8,8,0.9),rgba(20,4,4,0.95));
    border:1px solid rgba(150,20,20,0.5); padding:10px 12px; position:relative; overflow:hidden;
  }
  .hp-display::before { content:''; position:absolute; left:0;top:0;bottom:0;width:3px; background:linear-gradient(180deg,#ff4040,#800000); }
  .hp-label { font-family:'Cinzel',serif; font-size:8px; letter-spacing:3px; color:#8a3030; margin-bottom:5px; text-transform:uppercase; }
  .hp-track {
    height:14px; background:rgba(8,0,0,0.9);
    border:1px solid rgba(80,20,20,0.8); overflow:hidden; margin-bottom:4px;
    position:relative;
  }
  .hp-fill {
    height:100%; transition:width 0.3s ease;
    background:linear-gradient(90deg,#8b0000,#c02030,#e03040);
    position:relative; overflow:hidden;
  }
  .hp-fill::after {
    content:''; position:absolute; top:0; left:0; right:0; height:40%;
    background:rgba(255,255,255,0.15);
  }
  .hp-fill-segments {
    position:absolute; inset:0; pointer-events:none;
    background:repeating-linear-gradient(90deg,transparent,transparent 19px,rgba(0,0,0,0.3) 19px,rgba(0,0,0,0.3) 20px);
  }
  .hp-numbers { display:flex; justify-content:space-between; align-items:center; }
  .hp-current { font-family:'Cinzel Decorative',serif; font-size:16px; color:#e04040; }
  .hp-sep { font-size:10px; color:#5a2020; }
  .hp-max { font-family:'Cinzel',serif; font-size:11px; color:#8a3030; }
  .hp-armor-row { display:flex; align-items:center; gap:4px; margin-top:3px; font-family:'Cinzel',serif; font-size:9px; color:#6a5020; }
  .armor-icon { color:#8090a0; }
  .armor-val { color:#a0b0c0; }

  /* RESOURCE Display - Medieval Style */
  .resource-display {
    border:1px solid rgba(80,50,15,0.6); padding:10px 12px; position:relative; overflow:hidden;
    background:linear-gradient(135deg,rgba(15,10,3,0.9),rgba(10,6,2,0.95));
  }
  .resource-display::before { content:''; position:absolute; left:0;top:0;bottom:0;width:3px; background:var(--class-color,var(--gold)); opacity:0.7; }
  .resource-name { font-family:'Cinzel',serif; font-size:8px; letter-spacing:3px; color:var(--parch-dark); text-transform:uppercase; margin-bottom:6px; }
  .resource-val-row { display:flex; justify-content:space-between; align-items:baseline; margin-bottom:5px; }
  .resource-val { font-family:'Cinzel Decorative',serif; font-size:22px; font-weight:400; color:var(--class-color,var(--gold)); }
  .resource-max { font-family:'Cinzel',serif; font-size:11px; color:var(--text-dim); }
  .resource-track {
    height:10px; background:rgba(5,3,1,0.9);
    border:1px solid rgba(80,50,15,0.6); overflow:hidden; position:relative;
  }
  .resource-fill {
    height:100%; transition:width 0.4s ease;
    position:relative; overflow:hidden;
  }
  .resource-fill::after { content:''; position:absolute; top:0;left:0;right:0;height:40%; background:rgba(255,255,255,0.2); }
  .resource-status { font-family:'IM Fell English',serif; font-style:italic; font-size:10px; color:var(--ember); margin-top:4px; min-height:14px; }
  .threshold-marks { display:flex; justify-content:space-around; margin-top:3px; }
  .threshold { font-family:'Cinzel',serif; font-size:8px; color:#3a2818; }

  /* SKILL SLOTS - Medieval Style */
  .skills-section-title { font-family:'Cinzel',serif; font-size:9px; letter-spacing:2px; color:var(--parch-dark); text-transform:uppercase; padding-bottom:4px; border-bottom:1px solid rgba(120,80,30,0.4); display:flex; justify-content:space-between; }
  .skill-slot {
    background:linear-gradient(135deg,rgba(18,10,3,0.9),rgba(12,7,2,0.95));
    border:1px solid rgba(70,45,15,0.6); padding:8px 10px; margin-bottom:5px;
    cursor:pointer; transition:all 0.2s; position:relative; overflow:hidden;
  }
  .skill-slot::before { content:''; position:absolute; left:0;top:0;bottom:0;width:2px; background:var(--skill-color,rgba(120,80,30,0.5)); }
  .skill-slot:hover { border-color:rgba(200,169,110,0.4); background:rgba(25,14,4,0.95); }
  .skill-slot.on-cooldown { opacity:0.55; cursor:not-allowed; }
  .skill-slot.targeting-active { border-color:#e05020; animation:spulse 0.8s ease-in-out infinite; }
  @keyframes spulse { 0%,100%{border-color:#e05020} 50%{border-color:#ff8040} }
  .skill-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:3px; }
  .skill-key {
    font-family:'Cinzel Decorative',serif; font-size:9px; color:var(--parch-dark);
    border:1px solid rgba(120,80,30,0.6); padding:1px 5px; min-width:20px; text-align:center;
    background:rgba(10,6,2,0.8);
  }
  .skill-name { font-family:'Cinzel',serif; font-size:11px; color:var(--text-mid); flex:1; margin:0 6px; }
  .skill-desc { font-family:'IM Fell English',serif; font-style:italic; font-size:10px; color:var(--text-dim); line-height:1.3; }
  .cooldown-overlay {
    position:absolute; inset:0; background:rgba(0,0,0,0.7);
    display:flex; align-items:center; justify-content:center;
    font-family:'Cinzel Decorative',serif; font-size:18px; color:var(--gold);
  }

  /* STAT GRID */
  .stat-grid { display:grid; grid-template-columns:1fr 1fr; gap:4px; }
  .stat-box {
    background:linear-gradient(135deg,rgba(15,9,3,0.9),rgba(10,6,2,0.95));
    border:1px solid rgba(60,40,12,0.5); padding:5px 7px; text-align:center;
  }
  .stat-label { font-family:'Cinzel',serif; font-size:7px; color:var(--text-dim); letter-spacing:1px; text-transform:uppercase; }
  .stat-value { font-family:'Cinzel Decorative',serif; font-size:13px; color:var(--text-mid); margin-top:1px; }

  /* ═══ BOTTOM BAR ═══ */
  #bottom-bar {
    grid-column:1/-1;
    background:linear-gradient(90deg,#050302,#080502 20%,#080502 80%,#050302);
    border-top:1px solid rgba(120,80,30,0.5);
    display:flex; align-items:center; padding:0 16px; gap:12px;
  }
  .log-title { font-family:'Cinzel',serif; font-size:8px; letter-spacing:2px; color:var(--parch-dark); white-space:nowrap; }
  #log-container { flex:1; overflow:hidden; display:flex; flex-direction:column; gap:2px; }
  .log-entry { font-family:'IM Fell English',serif; font-size:12px; color:var(--text-dim); animation:logFade 0.3s ease; font-style:italic; }
  .log-entry.recent { color:var(--parch-mid); }
  .log-entry.action { color:var(--gold); }
  .log-entry.damage { color:var(--ember); }
  .log-entry.heal { color:#40a060; }
  @keyframes logFade { from{opacity:0;transform:translateY(-4px)} to{opacity:1} }
  .controls-hint { font-family:'Cinzel',serif; font-size:9px; color:var(--text-dim); text-align:right; line-height:1.7; white-space:nowrap; }
  .controls-hint span { color:var(--parch-dark); }

  /* MENU BAR in-game */
  .game-menu-bar { display:flex; gap:6px; }

  ::-webkit-scrollbar { width:4px; }
  ::-webkit-scrollbar-track { background:#050302; }
  ::-webkit-scrollbar-thumb { background:rgba(120,80,30,0.5); border-radius:2px; }

  /* Utility */
  .divider-gold { height:1px; background:linear-gradient(90deg,transparent,rgba(200,169,110,0.3),transparent); margin:4px 0; }

/* ═══ MULTI-PANEL ═══ */
#multi-panel {
  position:fixed; inset:0; z-index:999;
  background:rgba(5,3,2,0.98);
  display:none; flex-direction:column; align-items:center; justify-content:center; padding:30px 20px;
  overflow-y:auto;
}
#multi-panel.visible { display:flex; }
.multi-layout { display:grid; grid-template-columns:1fr 1fr; gap:20px; max-width:820px; width:100%; margin:20px 0; }
.multi-card {
  background:linear-gradient(180deg,rgba(20,12,5,0.9),rgba(10,6,2,0.95));
  border:1px solid rgba(120,80,30,0.4); padding:20px; display:flex; flex-direction:column; gap:10px;
  position:relative; overflow:hidden;
}
.multi-card::before { content:''; position:absolute; top:0;left:0;right:0; height:2px; background:linear-gradient(90deg,transparent,var(--gold),transparent); }
.multi-card-title { font-family:'Cinzel',serif; font-size:12px; letter-spacing:3px; color:var(--gold); text-transform:uppercase; }
.multi-card-sub { font-family:'IM Fell English',serif; font-style:italic; font-size:11px; color:var(--parch-dark); }
.multi-label { font-family:'Cinzel',serif; font-size:9px; letter-spacing:2px; color:var(--text-dim); text-transform:uppercase; }
.multi-code {
  font-family:'Cinzel Decorative',serif; font-size:13px; letter-spacing:3px; color:var(--gold-bright);
  background:rgba(200,169,110,0.06); border:1px solid rgba(200,169,110,0.3);
  padding:8px 12px; word-break:break-all; text-align:center;
}
.multi-copy-btn {
  font-family:'Cinzel',serif; font-size:9px; letter-spacing:2px; color:var(--parch-dark);
  border:1px solid rgba(120,80,30,0.4); padding:5px 12px; cursor:pointer;
  background:transparent; transition:all 0.2s; text-transform:uppercase;
}
.multi-copy-btn:hover { border-color:var(--gold); color:var(--gold); }
.multi-input {
  width:100%; padding:10px 12px;
  font-family:'Cinzel',serif; font-size:11px; letter-spacing:2px; color:var(--text-bright);
  background:rgba(10,6,2,0.9); border:1px solid rgba(120,80,30,0.5);
  outline:none; transition:border-color 0.2s;
}
.multi-input:focus { border-color:var(--gold); }
.multi-input::placeholder { color:var(--text-dim); letter-spacing:1px; }
.join-status { font-family:'IM Fell English',serif; font-style:italic; font-size:11px; min-height:18px; }
.join-status.ok { color:#40a060; }
.join-status.err { color:var(--ember); }
.join-status.pending { color:var(--gold); }
.peer-list { font-family:'IM Fell English',serif; font-size:11px; color:var(--text-dim); min-height:20px; }
.peer-entry { color:var(--text-mid); padding:2px 0; }
.multi-info {
  max-width:820px; width:100%;
  background:rgba(15,10,3,0.8); border:1px solid rgba(120,80,30,0.3);
  padding:12px 16px; display:flex; flex-direction:column; gap:6px;
}
.multi-info-row { font-family:'IM Fell English',serif; font-size:12px; color:var(--text-dim); }
.multi-info-row strong { color:var(--text-mid); }
.multi-hdr-badge {
  display:flex; align-items:center; gap:6px;
  border:1px solid rgba(120,80,30,0.4); padding:2px 10px;
  font-family:'Cinzel',serif; font-size:9px; letter-spacing:2px; color:var(--text-dim);
}
.remote-player-card {
  border:1px solid rgba(80,50,20,0.5); padding:7px 9px; margin-bottom:5px;
  background:rgba(12,7,2,0.9);
}
.remote-player-name { font-family:'Cinzel',serif; font-size:10px; }
.remote-player-class { font-family:'IM Fell English',serif; font-style:italic; font-size:10px; color:var(--text-dim); }
.remote-player-hp { font-size:9px; color:var(--text-dim); margin-top:2px; }


/* ═══════════════════════════════════════════════════════
   TALENT HUD (in panel-right)
══════════════════════════════════════════════════════════ */
#talent-hud {
  background: rgba(5,2,8,0.7);
  border: 1px solid rgba(200,169,110,0.2);
  border-radius: 3px;
  padding: 5px 7px;
  font-family: 'Cinzel', serif;
}
.talent-hud-row {
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
  font-size: 10px;
  margin-bottom: 3px;
}
.talent-lvl { color: #c8a96e; font-weight: bold; font-size: 11px; }
.talent-pts { color: #9b4dca; font-size: 10px; }
.talent-eclats { color: #4ecdc4; font-size: 10px; }
.talent-reset-bonus { font-size: 9px; color: #27ae60; text-align: right; margin-top: 2px; font-style: italic; }
.talent-xp-bar-wrap {
  height: 4px;
  background: rgba(20,10,5,0.8);
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid rgba(100,60,20,0.3);
}
.talent-xp-bar {
  height: 100%;
  background: linear-gradient(90deg, #6a3a10, #c8a96e);
  border-radius: 2px;
  transition: width 0.4s ease;
}

/* Mini buttons */
.hud-mini-btn {
  flex: 1;
  font-family: 'Cinzel', serif;
  font-size: 8px;
  color: #8a7040;
  background: rgba(10,5,2,0.8);
  border: 1px solid rgba(100,70,20,0.35);
  border-radius: 2px;
  padding: 3px 4px;
  cursor: pointer;
  letter-spacing: 0.5px;
  transition: all 0.2s;
}
.hud-mini-btn:hover { color: #c8a96e; border-color: rgba(200,169,110,0.5); background: rgba(20,10,4,0.9); }
.talent-btn { color: #5a3a9a; border-color: rgba(155,77,202,0.3); }
.talent-btn:hover { color: #9b4dca; border-color: rgba(155,77,202,0.6); }

/* ═══════════════════════════════════════════════════════
   TALENT TREE MODAL
══════════════════════════════════════════════════════════ */
.tt-pts { color: #9b4dca; font-size: 12px; }
.tt-eclats { color: #4ecdc4; font-size: 12px; }
.tt-lvl { color: #c8a96e; font-size: 12px; }
.tt-bonus { color: #27ae60; font-size: 11px; font-style: italic; }

.talent-branch {
  background: rgba(8,4,12,0.9);
  border: 1px solid rgba(var(--branch-color-rgb, 200,169,110), 0.25);
  border-top: 2px solid var(--branch-color, #c8a96e);
  border-radius: 4px;
  padding: 10px;
}
.branch-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(200,169,110,0.1);
}
.branch-icon { font-size: 16px; }
.branch-name {
  font-family: 'Cinzel', serif;
  font-size: 11px;
  color: var(--branch-color, #c8a96e);
  font-weight: bold;
  letter-spacing: 1px;
}
.branch-desc {
  font-family: 'IM Fell English', serif;
  font-size: 9px;
  color: #4a3a28;
  font-style: italic;
  margin-left: auto;
}
.branch-talents {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.talent-node {
  background: rgba(12,6,18,0.8);
  border: 1px solid rgba(60,40,20,0.4);
  border-radius: 3px;
  padding: 7px 9px;
  transition: all 0.2s;
}
.talent-node.invested {
  border-color: rgba(200,169,110,0.4);
  background: rgba(20,10,5,0.9);
}
.talent-node.affordable {
  border-color: rgba(155,77,202,0.35);
}
.talent-node:hover {
  border-color: rgba(200,169,110,0.5);
  background: rgba(18,9,3,0.95);
}
.talent-node-name {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #c8a96e;
  margin-bottom: 2px;
}
.locked-name { color: #3a2820 !important; }
.talent-node.locked { opacity: 0.5; pointer-events: none; }
.talent-node-rank {
  font-size: 9px;
  color: #9b4dca;
  margin-bottom: 3px;
}
.talent-node-rank .total-val { color: #27ae60; }
.talent-node-desc {
  font-family: 'IM Fell English', serif;
  font-size: 9px;
  color: #5a4a38;
  font-style: italic;
  margin-bottom: 4px;
  line-height: 1.3;
}
.talent-node-cost { margin-top: 3px; }
.talent-invest-btn {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #c8a96e;
  background: rgba(155,77,202,0.15);
  border: 1px solid rgba(155,77,202,0.4);
  border-radius: 2px;
  padding: 3px 8px;
  cursor: pointer;
  letter-spacing: 0.5px;
  transition: all 0.2s;
}
.talent-invest-btn:hover {
  background: rgba(155,77,202,0.3);
  color: #e0d0b0;
  border-color: rgba(155,77,202,0.7);
}
.talent-cost-locked {
  font-size: 9px;
  color: #3a2820;
  font-style: italic;
}

/* Reset section */
.reset-info {
  background: rgba(8,4,12,0.95);
  border: 1px solid rgba(200,50,20,0.3);
  border-radius: 4px;
  padding: 12px 16px;
  text-align: center;
  max-width: 420px;
  margin: 0 auto;
}
.reset-title {
  font-family: 'Cinzel Decorative', serif;
  font-size: 11px;
  color: #e74c3c;
  letter-spacing: 2px;
  margin-bottom: 5px;
}
.reset-desc {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #8a6050;
  margin-bottom: 4px;
}
.reset-bonus-info {
  font-family: 'IM Fell English', serif;
  font-style: italic;
  font-size: 9px;
  color: #27ae60;
  margin-bottom: 8px;
}
.reset-btn {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #3a2020;
  background: rgba(20,10,5,0.8);
  border: 1px solid rgba(80,30,20,0.4);
  border-radius: 3px;
  padding: 6px 16px;
  cursor: not-allowed;
  letter-spacing: 1px;
  opacity: 0.6;
}
.reset-btn.enabled {
  color: #e8c8b0;
  background: rgba(100,20,10,0.4);
  border-color: rgba(200,50,20,0.6);
  cursor: pointer;
  opacity: 1;
  transition: all 0.2s;
}
.reset-btn.enabled:hover {
  background: rgba(150,30,15,0.5);
  border-color: rgba(220,80,40,0.8);
  box-shadow: 0 0 10px rgba(200,50,20,0.3);
}

/* ═══════════════════════════════════════════════════════
   BOSS HUD
══════════════════════════════════════════════════════════ */
#boss-hud {
  animation: bossHudGlow 2s ease-in-out infinite;
}
@keyframes bossHudGlow {
  0%, 100% { box-shadow: 0 0 15px rgba(155,77,202,0.2); }
  50% { box-shadow: 0 0 30px rgba(155,77,202,0.5); }
}
.boss-name {
  font-family: 'Cinzel Decorative', serif;
  font-size: 11px;
  color: #c8a96e;
  letter-spacing: 2px;
  margin-bottom: 3px;
}
.boss-phase {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  letter-spacing: 1px;
  margin-bottom: 5px;
}
.boss-hp-bar-wrap {
  height: 6px;
  background: rgba(20,5,30,0.9);
  border-radius: 3px;
  overflow: hidden;
  border: 1px solid rgba(155,77,202,0.3);
  margin-bottom: 3px;
}
.boss-hp-bar {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}
.boss-hp-text {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #8a6090;
}
.boss-sentinels {
  font-family: 'IM Fell English', serif;
  font-style: italic;
  font-size: 9px;
  color: #5a4070;
  margin-top: 3px;
}

/* Skill node locked state */
.skill-node.locked {
  opacity: 0.4;
  cursor: not-allowed;
  background: rgba(8,4,4,0.9) !important;
  border-color: rgba(40,20,10,0.3) !important;
}

/* ═══════════════════════════════════════════════════════
   FONT SIZE UPGRADES — all in-game text larger
══════════════════════════════════════════════════════════ */

/* Panel titles */
.panel-title { font-size:13px !important; letter-spacing:2px; }
.panel-title-rune { font-size:14px !important; }

/* HP display */
.hp-label { font-size:12px !important; }
.hp-current { font-size:18px !important; font-weight:bold; }
.hp-max { font-size:14px !important; }
.hp-armor-row { font-size:12px !important; }

/* Resource */
.resource-name { font-size:13px !important; }
.resource-val { font-size:18px !important; }
.resource-max { font-size:13px !important; }
.resource-status { font-size:12px !important; }

/* Stats */
.entity-stat-row { font-size:12px !important; }
.entity-stat-label { font-size:11px !important; }
.entity-stat-val { font-size:12px !important; }
.stat-grid { font-size:12px !important; }

/* Log */
.log-entry { font-size:12px !important; line-height:1.5; }
.log-title { font-size:13px !important; }

/* Talent HUD */
.talent-lvl { font-size:13px !important; }
.talent-pts { font-size:12px !important; }
.talent-eclats { font-size:12px !important; }
.hud-mini-btn { font-size:10px !important; }

/* Skill nodes in tree */
.skill-node-name { font-size:12px !important; }
.skill-node-desc { font-size:11px !important; }
.skill-node-type { font-size:11px !important; }

/* Header */
.hdr-btn { font-size:11px !important; padding:6px 14px !important; }
#header h1 { font-size:20px !important; }

/* Controls hint */
.controls-hint, #skill-bar-hint { font-size:11px !important; }

/* Tooltip */
#tooltip { font-size:12px !important; padding:5px 10px !important; }

/* Targeting indicator */
#targeting-indicator { font-size:13px !important; }

/* ═══════════════════════════════════════════════════════
   SKILL BAR (bottom of screen)
══════════════════════════════════════════════════════════ */
#bottom-bar {
  display: grid !important;
  grid-template-columns: auto 1fr !important;
  grid-template-rows: 1fr !important;
  gap: 0 !important;
  padding: 0 !important;
  align-items: stretch !important;
}

#skill-bar {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  background: linear-gradient(90deg, rgba(5,2,1,0.98), rgba(8,4,2,0.95));
  border-right: 1px solid rgba(120,80,30,0.4);
  min-width: 360px;
}

#skill-bar-slots {
  display: flex;
  gap: 8px;
  align-items: stretch;
}

#skill-bar-hint {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #2a1808;
  letter-spacing: 1px;
  text-align: center;
}
#skill-bar-hint span {
  color: #5a4020;
  border: 1px solid rgba(120,80,30,0.3);
  padding: 0 4px;
  font-size: 9px;
  border-radius: 2px;
}

#log-zone {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding: 6px 10px;
}

/* Skill bar slot cards */
.skill-bar-slot {
  flex: 1;
  background: linear-gradient(180deg, rgba(18,9,3,0.95), rgba(10,5,1,0.98));
  border: 1px solid rgba(80,50,15,0.6);
  border-radius: 3px;
  padding: 8px 10px;
  cursor: pointer;
  position: relative;
  transition: border-color 0.15s, background 0.15s;
  min-width: 100px;
  max-width: 160px;
}
.skill-bar-slot:hover {
  border-color: rgba(200,169,110,0.5);
  background: linear-gradient(180deg, rgba(25,12,3,0.98), rgba(15,7,2,1));
}
.skill-bar-slot.on-cooldown { opacity: 0.55; cursor: not-allowed; }
.skill-bar-slot.targeting-active {
  border-color: rgba(200,100,30,0.9) !important;
  box-shadow: 0 0 12px rgba(200,100,30,0.4);
  background: linear-gradient(180deg, rgba(30,12,3,0.98), rgba(18,7,2,1)) !important;
}
.skill-bar-slot.empty {
  border-style: dashed;
  border-color: rgba(60,40,15,0.4);
  cursor: pointer;
  opacity: 0.5;
}

.sbs-key {
  font-family: 'Cinzel Decorative', serif;
  font-size: 11px;
  color: #6a4a20;
  position: absolute;
  top: 4px;
  left: 6px;
}
.sbs-name {
  font-family: 'Cinzel', serif;
  font-size: 12px;
  color: #c8a96e;
  margin-left: 18px;
  margin-bottom: 3px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.sbs-desc {
  font-family: 'IM Fell English', serif;
  font-style: italic;
  font-size: 11px;
  color: #5a4030;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.sbs-meta {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #3a2818;
  margin-top: 4px;
}
.sbs-cd-overlay {
  position: absolute;
  inset: 0;
  background: rgba(3,1,0,0.65);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Cinzel Decorative', serif;
  font-size: 16px;
  color: #c8a96e;
  border-radius: 3px;
}
.sbs-empty-hint {
  font-family: 'IM Fell English', serif;
  font-style: italic;
  font-size: 11px;
  color: #2a1808;
  text-align: center;
  margin-top: 6px;
}

/* ═══════════════════════════════════════════════════════
   ENEMY INSPECTOR (panel-left replacement)
══════════════════════════════════════════════════════════ */
#enemy-inspector {
  padding: 4px 0;
}
.ei-name {
  font-family: 'Cinzel Decorative', serif;
  font-size: 13px;
  color: #c8a96e;
  margin-bottom: 6px;
  padding-bottom: 5px;
  border-bottom: 1px solid rgba(120,80,30,0.4);
}
.ei-hp-bar-wrap {
  height: 8px;
  background: rgba(20,5,5,0.9);
  border-radius: 3px;
  overflow: hidden;
  margin: 4px 0 8px;
  border: 1px solid rgba(80,20,20,0.4);
}
.ei-hp-bar { height: 100%; border-radius: 3px; transition: width 0.3s; }
.ei-section-title {
  font-family: 'Cinzel', serif;
  font-size: 11px;
  letter-spacing: 2px;
  color: #6a4a20;
  margin: 10px 0 5px;
  padding-bottom: 3px;
  border-bottom: 1px solid rgba(80,50,20,0.3);
  text-transform: uppercase;
}
.ei-stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 3px 0;
  border-bottom: 1px solid rgba(20,10,3,0.8);
  font-family: 'Cinzel', serif;
  font-size: 12px;
}
.ei-stat-label { color: #5a4028; }
.ei-stat-val { color: #c8b090; font-weight: bold; }
.ei-stat-val.danger { color: #e04040; }
.ei-stat-val.good { color: #40a060; }
.ei-stat-val.weak { color: #f1c40f; }
.ei-debuff-tag {
  display: inline-block;
  background: rgba(155,77,202,0.2);
  border: 1px solid rgba(155,77,202,0.4);
  border-radius: 2px;
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #9b4dca;
  padding: 1px 5px;
  margin: 2px 2px 0 0;
}
.ei-weakness-tag {
  display: inline-block;
  background: rgba(241,196,15,0.1);
  border: 1px solid rgba(241,196,15,0.3);
  border-radius: 2px;
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #f1c40f;
  padding: 1px 5px;
  margin: 2px 2px 0 0;
}
/* ══════════════════════════════════════════════════════
   PHASE 1 — INVENTAIRE & MARCHAND
   ══════════════════════════════════════════════════════ */

/* ── Slot équipé ─────────────────────────── */
.inv-equip-slot {
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(10,5,2,0.8);
  border: 1px solid rgba(120,80,30,0.35);
  border-radius: 3px;
  padding: 7px 10px;
  transition: border-color 0.2s;
}
.inv-equip-slot.occupied {
  border-color: rgba(200,169,110,0.4);
  cursor: pointer;
}
.inv-equip-slot.occupied:hover {
  border-color: rgba(200,60,30,0.7);
  background: rgba(20,5,2,0.9);
}
.inv-slot-icon { font-size: 18px; min-width: 22px; text-align: center; }
.inv-slot-info { flex: 1; }
.inv-slot-name { font-family: 'Cinzel', serif; font-size: 11px; font-weight: bold; }
.inv-slot-bonus { font-family: 'IM Fell English', serif; font-style: italic; font-size: 10px; color: #6a5030; margin-top: 2px; }
.inv-slot-unequip { color: rgba(200,60,30,0.6); font-size: 11px; font-family: 'Cinzel', serif; opacity: 0; transition: opacity 0.2s; }
.inv-equip-slot.occupied:hover .inv-slot-unequip { opacity: 1; }

/* ── Items en sac ───────────────────────── */
.inv-item {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(8,4,1,0.75);
  border: 1px solid rgba(80,50,15,0.3);
  border-radius: 3px;
  padding: 7px 10px;
  cursor: pointer;
  transition: border-color 0.15s, background 0.15s;
}
.inv-item:hover {
  background: rgba(20,10,2,0.9);
  border-color: rgba(200,169,110,0.5);
}
.inv-item-icon { font-size: 20px; min-width: 24px; text-align: center; }
.inv-item-info { flex: 1; }
.inv-item-name { font-family: 'Cinzel', serif; font-size: 11px; font-weight: bold; }
.inv-item-bonus { font-family: 'IM Fell English', serif; font-style: italic; font-size: 10px; color: #6a5030; margin-top: 2px; }
.inv-item-actions { display: flex; flex-direction: column; gap: 4px; }
.inv-btn-equip, .inv-btn-sell {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  border: 1px solid;
  border-radius: 2px;
  padding: 3px 8px;
  cursor: pointer;
  letter-spacing: 0.5px;
  transition: background 0.15s;
}
.inv-btn-equip {
  color: #c8a96e;
  background: rgba(20,10,2,0.8);
  border-color: rgba(200,169,110,0.4);
}
.inv-btn-equip:hover { background: rgba(200,169,110,0.15); }
.inv-btn-sell {
  color: #f1c40f;
  background: rgba(20,15,2,0.8);
  border-color: rgba(241,196,15,0.3);
}
.inv-btn-sell:hover { background: rgba(241,196,15,0.12); }

/* ── Marchand ───────────────────────────── */
.merchant-item {
  display: flex;
  align-items: center;
  gap: 12px;
  background: rgba(8,4,1,0.8);
  border: 1px solid rgba(80,50,15,0.35);
  border-radius: 3px;
  padding: 9px 12px;
  transition: border-color 0.15s;
}
.merchant-item:hover:not(.cant-afford) {
  border-color: rgba(200,169,110,0.5);
  background: rgba(15,8,2,0.9);
}
.merchant-item.cant-afford { opacity: 0.5; }
.merchant-item-icon { font-size: 22px; min-width: 26px; text-align: center; }
.merchant-item-info { flex: 1; }
.merchant-item-name { font-family: 'Cinzel', serif; font-size: 11px; font-weight: bold; }
.merchant-item-desc { font-family: 'IM Fell English', serif; font-style: italic; font-size: 10px; color: #6a5030; margin-top: 2px; }
.merchant-item-price { text-align: center; min-width: 80px; }
.merchant-buy-btn {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #c8a96e;
  background: rgba(20,10,2,0.9);
  border: 1px solid rgba(200,169,110,0.4);
  border-radius: 2px;
  padding: 4px 10px;
  cursor: pointer;
  letter-spacing: 0.5px;
  margin-top: 4px;
  transition: background 0.15s;
}
.merchant-buy-btn:hover:not(.disabled) { background: rgba(200,169,110,0.2); }
.merchant-buy-btn.disabled { opacity: 0.4; cursor: not-allowed; }

/* ══════════════════════════════════════════════════════
   PHASE 2 — SYSTÈMES GLOBAUX
   Modaux de base · Chat · Trade · Audio · Inventaire MMO
   ══════════════════════════════════════════════════════ */

/* ── Overlay de base ─────────────────────────────────── */
.vb-modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 400;
  background: rgba(1,0,3,0.88);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
}
.vb-modal {
  background: linear-gradient(160deg, #0c0610 0%, #070410 50%, #0a0608 100%);
  border: 1px solid rgba(200,169,110,0.3);
  border-radius: 6px;
  box-shadow: 0 0 40px rgba(100,20,180,0.25), 0 0 80px rgba(0,0,0,0.8), inset 0 0 30px rgba(155,77,202,0.04);
  width: 90vw;
  max-height: 88vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  position: relative;
}
.vb-close-btn {
  background: rgba(20,10,5,0.8);
  border: 1px solid rgba(200,60,30,0.4);
  color: rgba(200,100,80,0.8);
  font-size: 11px;
  padding: 3px 9px;
  cursor: pointer;
  border-radius: 2px;
  transition: all 0.15s;
}
.vb-close-btn:hover { background: rgba(200,60,30,0.2); color: #ff6040; }

/* ── Header modal ────────────────────────────────────── */
.inv-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 16px 8px;
  background: linear-gradient(90deg, rgba(155,77,202,0.08), rgba(200,169,110,0.05), rgba(155,77,202,0.08));
}
.inv-header-left { display: flex; align-items: center; gap: 8px; }
.inv-header-right { display: flex; align-items: center; gap: 8px; }
.inv-title {
  font-family: 'Cinzel Decorative', serif;
  font-size: 12px;
  color: #c8a96e;
  letter-spacing: 3px;
}
.inv-header-rune { color: rgba(155,77,202,0.7); font-size: 13px; }
.inv-gold-pill {
  display: flex; align-items: center; gap: 5px;
  background: rgba(200,160,20,0.12);
  border: 1px solid rgba(241,196,15,0.3);
  border-radius: 20px;
  padding: 3px 10px;
  font-family: 'Cinzel', serif;
  font-size: 11px;
  color: #f1c40f;
  font-weight: bold;
}
.inv-gold-unit { font-size: 9px; color: #a08020; }
.inv-count-pill {
  background: rgba(120,80,30,0.15);
  border: 1px solid rgba(120,80,30,0.3);
  border-radius: 20px;
  padding: 3px 9px;
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #8a6030;
}

/* Divider doré fantaisie */
.inv-divider-fancy {
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(200,169,110,0.3), rgba(155,77,202,0.4), rgba(200,169,110,0.3), transparent);
  margin: 0;
}

/* ── Corps de l'inventaire ───────────────────────────── */
.inv-window { max-width: 780px; }
.inv-body {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 0;
  flex: 1;
  overflow: hidden;
  min-height: 0;
}
.inv-left-col {
  padding: 12px 14px;
  border-right: 1px solid rgba(120,80,30,0.2);
  overflow-y: auto;
}
.inv-right-col {
  padding: 12px 14px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  position: relative;
}
.inv-section-label {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #6b5432;
  letter-spacing: 2px;
  margin-bottom: 6px;
  padding-bottom: 3px;
  border-bottom: 1px solid rgba(120,80,30,0.2);
}

/* ── Silhouette personnage ───────────────────────────── */
.inv-character-layout {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  margin-bottom: 10px;
}
.inv-char-silhouette {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
.inv-char-sprite {
  width: 60px;
  height: 60px;
  background: radial-gradient(circle, rgba(155,77,202,0.12), rgba(0,0,0,0.5));
  border: 1px solid rgba(155,77,202,0.3);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 12px rgba(155,77,202,0.2);
}
.inv-char-stats {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #6a5030;
  text-align: center;
  line-height: 1.5;
}
.inv-equipment-slots { flex: 1; display: flex; flex-direction: column; gap: 5px; }
.inv-eq-row { display: flex; gap: 5px; }
.inv-eq-slot {
  flex: 1;
  background: rgba(8,4,2,0.7);
  border: 1px solid rgba(80,50,15,0.35);
  border-radius: 4px;
  padding: 5px;
  min-height: 54px;
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  position: relative;
  overflow: hidden;
}
.inv-eq-slot:hover { border-color: rgba(200,60,30,0.6); background: rgba(20,5,2,0.9); }
.inv-eq-slot::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.02) 0%, transparent 50%);
  pointer-events: none;
}
.inv-eq-slot-icon { font-size: 11px; opacity: 0.35; }
.inv-eq-slot-label {
  font-family: 'Cinzel', serif;
  font-size: 7px;
  color: #3a2010;
  letter-spacing: 1px;
}
.inv-eq-slot-content {
  font-size: 9px;
  text-align: center;
  line-height: 1.2;
  word-break: break-word;
}
.inv-eq-slot.occupied {
  border-color: rgba(200,169,110,0.35);
  background: rgba(15,8,3,0.85);
}
.inv-eq-slot.occupied .inv-eq-slot-icon { opacity: 1; font-size: 16px; }
.inv-eq-slot.occupied::after {
  content: '✕';
  position: absolute;
  top: 2px; right: 4px;
  font-size: 8px;
  color: rgba(200,60,30,0);
  transition: color 0.15s;
}
.inv-eq-slot.occupied:hover::after { color: rgba(200,60,30,0.7); }

/* ── Filtres ─────────────────────────────────────────── */
.inv-filter-row { display: flex; flex-wrap: wrap; gap: 4px; }
.inv-filter-btn {
  font-family: 'Cinzel', serif;
  font-size: 8px;
  color: #6a5030;
  background: rgba(10,5,2,0.7);
  border: 1px solid rgba(80,50,15,0.3);
  border-radius: 2px;
  padding: 3px 7px;
  cursor: pointer;
  transition: all 0.12s;
  letter-spacing: 0.5px;
}
.inv-filter-btn:hover, .inv-filter-btn.active {
  color: #c8a96e;
  border-color: rgba(200,169,110,0.5);
  background: rgba(200,169,110,0.08);
}
.inv-filter-btn.rarity-uncommon.active { color: #4eff4e; border-color: rgba(78,255,78,0.4); }
.inv-filter-btn.rarity-rare.active { color: #4ea8ff; border-color: rgba(78,168,255,0.4); }
.inv-filter-btn.rarity-epic.active { color: #c030ff; border-color: rgba(192,48,255,0.4); }

/* ── Grille d'items (sac) ────────────────────────────── */
.inv-bag-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 5px;
  flex: 1;
}
.inv-grid-item {
  aspect-ratio: 1;
  background: rgba(6,3,1,0.8);
  border: 1px solid rgba(80,50,15,0.3);
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  cursor: pointer;
  transition: all 0.12s;
  position: relative;
  padding: 4px;
  min-height: 64px;
}
.inv-grid-item:hover {
  border-color: rgba(200,169,110,0.6);
  background: rgba(20,10,3,0.95);
  transform: scale(1.03);
  z-index: 5;
}
.inv-grid-item.rarity-common  { border-color: rgba(140,140,140,0.35); }
.inv-grid-item.rarity-uncommon{ border-color: rgba(78,255,78,0.35); box-shadow: 0 0 6px rgba(78,255,78,0.1); }
.inv-grid-item.rarity-rare    { border-color: rgba(78,168,255,0.4); box-shadow: 0 0 8px rgba(78,168,255,0.15); }
.inv-grid-item.rarity-epic    { border-color: rgba(192,48,255,0.5); box-shadow: 0 0 10px rgba(192,48,255,0.2); animation: epicPulse 2s ease-in-out infinite; }
@keyframes epicPulse {
  0%, 100% { box-shadow: 0 0 8px rgba(192,48,255,0.2); }
  50%       { box-shadow: 0 0 16px rgba(192,48,255,0.4); }
}
.inv-grid-item-icon { font-size: 22px; line-height: 1; }
.inv-grid-item-name {
  font-family: 'Cinzel', serif;
  font-size: 7px;
  text-align: center;
  line-height: 1.1;
  word-break: break-word;
  max-width: 100%;
}
.inv-grid-item-rarity-bar {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 2px;
  border-radius: 0 0 3px 3px;
}
.inv-grid-item:hover .inv-grid-item-actions {
  display: flex;
}
.inv-grid-item-actions {
  display: none;
  position: absolute;
  inset: 0;
  background: rgba(5,2,1,0.92);
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  border-radius: 3px;
}
.inv-grid-action {
  font-family: 'Cinzel', serif;
  font-size: 8px;
  padding: 3px 8px;
  border-radius: 2px;
  cursor: pointer;
  width: 80%;
  text-align: center;
  transition: background 0.1s;
}
.inv-grid-action.equip { color: #c8a96e; background: rgba(200,169,110,0.15); border: 1px solid rgba(200,169,110,0.4); }
.inv-grid-action.sell  { color: #f1c40f; background: rgba(241,196,15,0.1); border: 1px solid rgba(241,196,15,0.3); }
.inv-grid-action.equip:hover { background: rgba(200,169,110,0.3); }
.inv-grid-action.sell:hover  { background: rgba(241,196,15,0.2); }

/* ── Tooltip inventaire ──────────────────────────────── */
.inv-item-tooltip {
  position: fixed;
  z-index: 500;
  background: linear-gradient(160deg, #0f0810, #080510);
  border: 1px solid rgba(200,169,110,0.4);
  border-radius: 4px;
  padding: 10px 12px;
  min-width: 180px;
  max-width: 240px;
  pointer-events: none;
  box-shadow: 0 4px 20px rgba(0,0,0,0.8);
}
.tooltip-name { font-family:'Cinzel',serif; font-size:12px; font-weight:bold; margin-bottom:4px; }
.tooltip-rarity { font-family:'Cinzel',serif; font-size:9px; letter-spacing:1px; margin-bottom:6px; }
.tooltip-bonus { font-family:'IM Fell English',serif; font-style:italic; font-size:11px; color:#c8b090; margin-bottom:6px; }
.tooltip-slot { font-family:'Cinzel',serif; font-size:8px; color:#6a5030; }
.tooltip-value { font-family:'Cinzel',serif; font-size:9px; color:#f1c40f; margin-top:4px; }

/* ── Footer modal ────────────────────────────────────── */
.inv-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 14px;
  border-top: 1px solid rgba(120,80,30,0.2);
  background: rgba(5,2,1,0.6);
  flex-shrink: 0;
}
.inv-footer-btn {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #c8a96e;
  background: rgba(20,10,3,0.8);
  border: 1px solid rgba(200,169,110,0.35);
  border-radius: 3px;
  padding: 5px 12px;
  cursor: pointer;
  letter-spacing: 0.5px;
  transition: all 0.12s;
  display: flex;
  align-items: center;
  gap: 5px;
}
.inv-footer-btn:hover { background: rgba(200,169,110,0.12); border-color: rgba(200,169,110,0.6); }

/* ── Marchand (grille) ───────────────────────────────── */
.merchant-window { max-width: 900px; }
.merchant-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 12px;
  padding: 14px;
  overflow-y: auto;
  flex: 1;
}
.merchant-card {
  background: linear-gradient(135deg, rgba(10,5,2,0.95), rgba(8,3,1,0.9));
  border: 1px solid rgba(80,50,15,0.4);
  border-radius: 6px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}
.merchant-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(200,169,110,0.4), transparent);
}
.merchant-card:hover:not(.cant-afford) {
  border-color: rgba(200,169,110,0.6);
  background: linear-gradient(135deg, rgba(20,10,5,0.98), rgba(15,7,2,0.95));
  box-shadow: 0 0 10px rgba(200,169,110,0.2);
  transform: translateY(-2px);
}
.merchant-card.cant-afford { opacity: 0.5; filter: grayscale(0.3); }
.merchant-card-top { display: flex; align-items: center; gap: 8px; }
.merchant-card-icon { font-size: 22px; }
.merchant-card-info { flex: 1; }
.merchant-card-name { font-family:'Cinzel',serif; font-size:11px; font-weight:bold; }
.merchant-card-desc { font-family:'IM Fell English',serif; font-style:italic; font-size:10px; color:#6a5030; margin-top:2px; }
.merchant-card-price { display:flex; justify-content:space-between; align-items:center; margin-top:4px; }
.merchant-price-tag { font-family:'Cinzel',serif; font-size:12px; color:#f1c40f; font-weight:bold; }
.merchant-buy-btn {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #c8a96e;
  background: rgba(200,169,110,0.12);
  border: 1px solid rgba(200,169,110,0.4);
  border-radius: 2px;
  padding: 4px 10px;
  cursor: pointer;
  transition: all 0.12s;
}
.merchant-buy-btn:hover:not(:disabled) { background: rgba(200,169,110,0.25); }
.merchant-buy-btn:disabled { opacity:0.3; cursor:not-allowed; }

/* ══════════════════════════════════════════════════════
   CHAT
   ══════════════════════════════════════════════════════ */
.chat-modal-container {
  position: fixed;
  bottom: 70px;
  right: 14px;
  z-index: 350;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}
.chat-window {
  width: 340px;
  max-height: 480px;
  background: linear-gradient(160deg, #0a0710 0%, #070410 100%);
  border: 1px solid rgba(155,77,202,0.35);
  border-radius: 6px;
  box-shadow: 0 4px 30px rgba(0,0,0,0.8), 0 0 20px rgba(100,20,180,0.15);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.chat-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: rgba(155,77,202,0.1);
  border-bottom: 1px solid rgba(155,77,202,0.2);
  flex-shrink: 0;
}
.chat-tabs-row {
  display: flex;
  padding: 4px 8px;
  gap: 3px;
  border-bottom: 1px solid rgba(80,50,15,0.2);
  overflow-x: auto;
  flex-shrink: 0;
  scrollbar-width: none;
}
.chat-tab {
  font-family: 'Cinzel', serif;
  font-size: 9px;
  color: #6a5030;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 2px;
  padding: 3px 8px;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.12s;
  position: relative;
  display: flex; align-items: center; gap: 4px;
}
.chat-tab:hover { color: #c8a96e; border-color: rgba(120,80,30,0.3); }
.chat-tab.active { color: #c8a96e; border-color: rgba(155,77,202,0.5); background: rgba(155,77,202,0.1); }
.chat-unread-dot {
  background: #e74c3c;
  color: white;
  font-size: 8px;
  min-width: 14px;
  height: 14px;
  border-radius: 7px;
  display: flex; align-items: center; justify-content: center;
  padding: 0 3px;
  font-family: 'Cinzel', serif;
}
.chat-messages-area {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-height: 140px;
  max-height: 200px;
  scrollbar-width: thin;
  scrollbar-color: rgba(155,77,202,0.3) transparent;
}
.chat-msg {
  display: flex;
  gap: 5px;
  align-items: baseline;
  line-height: 1.3;
  font-size: 11px;
  flex-wrap: wrap;
}
.chat-msg.system { opacity: 0.65; }
.chat-msg.self .chat-msg-name { color: #c8a96e !important; }
.chat-msg-time { font-family:'Cinzel',serif; font-size:8px; color:#3a2010; flex-shrink:0; }
.chat-msg-name { font-family:'Cinzel',serif; font-size:10px; font-weight:bold; flex-shrink:0; }
.chat-msg-name::after { content:':'; }
.chat-msg-text { font-family:'IM Fell English',serif; color:#9a8060; font-size:11px; word-break:break-word; }
.chat-players-section {
  border-top: 1px solid rgba(80,50,15,0.2);
  padding: 4px 0;
  max-height: 80px;
  overflow-y: auto;
  flex-shrink: 0;
}
.chat-player-list { padding: 0 8px; display:flex; flex-direction:column; gap:2px; }
.chat-player-entry {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 2px 4px;
  border-radius: 2px;
  cursor: pointer;
  transition: background 0.1s;
}
.chat-player-entry:hover { background: rgba(155,77,202,0.1); }
.chat-action-btn {
  font-size: 11px;
  background: transparent;
  border: none;
  cursor: pointer;
  color: #6a5030;
  padding: 1px 4px;
  transition: color 0.1s;
}
.chat-action-btn:hover { color: #c8a96e; }
.chat-input-row {
  display: flex;
  padding: 6px 8px;
  gap: 5px;
  border-top: 1px solid rgba(80,50,15,0.2);
  flex-shrink: 0;
}
.chat-input {
  flex: 1;
  background: rgba(10,5,2,0.8);
  border: 1px solid rgba(80,50,15,0.35);
  border-radius: 3px;
  color: #c8b090;
  font-family: 'IM Fell English', serif;
  font-size: 11px;
  padding: 5px 8px;
  outline: none;
  transition: border-color 0.15s;
}
.chat-input:focus { border-color: rgba(155,77,202,0.5); }
.chat-send-btn {
  background: rgba(155,77,202,0.2);
  border: 1px solid rgba(155,77,202,0.4);
  color: #c8a96e;
  padding: 5px 10px;
  cursor: pointer;
  border-radius: 3px;
  font-size: 11px;
  transition: background 0.12s;
}
.chat-send-btn:hover { background: rgba(155,77,202,0.35); }
/* Toggle button flottant */
.chat-toggle-btn {
  position: fixed;
  bottom: 14px;
  right: 14px;
  z-index: 500;
  width: 42px; height: 42px;
  border-radius: 50%;
  background: rgba(155,77,202,0.25);
  border: 1px solid rgba(155,77,202,0.5);
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
  cursor: pointer;
  box-shadow: 0 2px 14px rgba(100,20,180,0.3);
  transition: all 0.15s;
}
.chat-toggle-btn:hover { background: rgba(155,77,202,0.45); transform: scale(1.05); }
.chat-toggle-btn.has-unread { animation: chatPulse 1.5s ease-in-out infinite; }
@keyframes chatPulse {
  0%,100% { box-shadow: 0 0 8px rgba(231,76,60,0.3); }
  50%      { box-shadow: 0 0 20px rgba(231,76,60,0.7); }
}
.chat-badge {
  position: absolute;
  top: -3px; right: -3px;
  background: #e74c3c;
  color: white;
  font-size: 9px;
  min-width: 16px; height: 16px;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Cinzel', serif;
  padding: 0 3px;
}

/* ══════════════════════════════════════════════════════
   TRADE
   ══════════════════════════════════════════════════════ */
.trade-window { max-width: 600px; }
.trade-layout {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 8px;
  padding: 12px 14px;
  flex: 1;
  overflow-y: auto;
  min-height: 0;
}
.trade-side { display: flex; flex-direction: column; gap: 4px; }
.trade-side-label {
  font-family: 'Cinzel Decorative', serif;
  font-size: 10px;
  color: #c8a96e;
  letter-spacing: 2px;
  margin-bottom: 4px;
  text-align: center;
}
.trade-items-area {
  background: rgba(5,2,1,0.6);
  border: 1px solid rgba(80,50,15,0.25);
  border-radius: 3px;
  padding: 6px;
  min-height: 100px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.trade-item {
  display: flex; align-items: center; gap: 6px;
  background: rgba(10,5,2,0.7);
  border: 1px solid rgba(80,50,15,0.3);
  border-radius: 3px;
  padding: 5px 7px;
  cursor: pointer;
  transition: border-color 0.12s;
}
.trade-item:hover { border-color: rgba(200,60,30,0.4); }
.trade-item-icon { font-size: 18px; }
.trade-inv-scroll {
  max-height: 140px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 3px;
  scrollbar-width: thin;
  scrollbar-color: rgba(120,80,30,0.3) transparent;
}
.trade-inv-item {
  display: flex; align-items: center; gap: 6px;
  padding: 4px 7px;
  background: rgba(8,4,1,0.6);
  border: 1px solid rgba(80,50,15,0.2);
  border-radius: 2px;
  cursor: pointer;
  font-size: 11px;
  transition: all 0.1s;
}
.trade-inv-item:hover { border-color: rgba(200,169,110,0.4); background: rgba(20,10,3,0.9); }
.trade-gold-input {
  width: 100%;
  background: rgba(10,5,2,0.8);
  border: 1px solid rgba(241,196,15,0.3);
  border-radius: 3px;
  color: #f1c40f;
  font-family: 'Cinzel', serif;
  font-size: 12px;
  padding: 5px 8px;
  outline: none;
  box-sizing: border-box;
}
.trade-gold-input:focus { border-color: rgba(241,196,15,0.6); }

/* ══════════════════════════════════════════════════════
   AUDIO SETTINGS
   ══════════════════════════════════════════════════════ */
.audio-slider-row {
  display: flex;
  align-items: center;
  gap: 10px;
}
.audio-label {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #8a6030;
  min-width: 110px;
}
.audio-slider {
  flex: 1;
  -webkit-appearance: none;
  height: 4px;
  background: rgba(80,50,15,0.4);
  border-radius: 2px;
  outline: none;
  cursor: pointer;
}
.audio-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: #9b4dca;
  border: 1px solid rgba(200,169,110,0.5);
  cursor: pointer;
}
.audio-val {
  font-family: 'Cinzel', serif;
  font-size: 10px;
  color: #c8a96e;
  min-width: 36px;
  text-align: right;
}

/* ══════════════════════════════════════════════════════
   RUN BRIEFING & MODIFICATEURS
   ══════════════════════════════════════════════════════ */
.run-mod-entry {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 7px 10px;
  border: 1px solid;
  border-radius: 4px;
  transition: transform 0.1s;
}
.run-mod-entry:hover { transform: translateX(2px); }

/* Responsive minimal */
@media (max-width: 600px) {
  .inv-body { grid-template-columns: 1fr; }
  .inv-left-col { border-right: none; border-bottom: 1px solid rgba(120,80,30,0.2); }
  .inv-bag-grid { grid-template-columns: repeat(3, 1fr); }
  .trade-layout { grid-template-columns: 1fr; }
  .merchant-grid { grid-template-columns: 1fr; }
  .chat-window { width: 92vw; }
}